<p-dialog header="Create department"
          (visibleChange)="redirectBack()"
          [visible]="true"
          [modal]="true"
          [style]="{width: '50vw', 'min-height': '50vh'}">
  <ng-content/>
  <form [formGroup]="form">
    <!--DEPARTMENT ID-->
    <div class="form-control" *ngrxLet="departmentsToDropdown$ as departmentsToDropdown">
      <label htmlFor="departmentId">Department id*</label>
      <p-dropdown [options]="departmentsToDropdown"
                  [filter]="true"
                  [virtualScrollItemSize]="20"
                  [virtualScroll]="departmentsToDropdown.length > 20"
                  [readonly]="!id"
                  filterBy="name"
                  optionLabel="name"
                  optionValue="id"
                  formControlName="departmentId"/>
    </div>

    <!--NAME-->
    <div class="form-control">
      <label htmlFor="name">Username*</label>
      <input pInputText
             formControlName="name"
             id="name"/>
    </div>

    <!--Email-->
    <div class="form-control">
      <label htmlFor="email">Email*</label>
      <input pInputText
             type="email"
             formControlName="email"
             id="email"/>
    </div>
  </form>
  <ng-template pTemplate="footer">
    <p-button (click)="handleConfirm()"
              [disabled]="!form.controls.name.value || !form.controls.email.value || !form.valid || (loading$ | async)!"
              label="Confirm"
              styleClass="p-button-text"
              type="submit"/>
  </ng-template>
</p-dialog>
